/* Google Fonts Import */
@import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Montserrat:wght@500;700&display=swap");

/* CSS Variables for consistent styling */
:root {
   --primary-bg: #f8f9fc; /* Light background for the overall app */
   --card-bg: #ffffff; /* White for cards */
   --accent-blue: #6366f1; /* Primary blue/purple for branding and highlights */
   --accent-blue-hover: #4f46e5; /* Darker shade for hover */
   --accent-green: #28a745; /* Success Green */
   --text-dark: #333333; /* Dark text for primary content */
   --text-light: #666666; /* Lighter text for descriptions/placeholders */
   --border-color: #e0e0e0; /* Light grey border for elements */
   --error-color: #dc3545; /* Red for errors */
   --button-text-color: #ffffff; /* White text for buttons */
   --shadow-light: rgba(0, 0, 0, 0.08); /* Light shadow for cards */
   --shadow-medium: rgba(0, 0, 0, 0.12); /* Medium shadow for hover */
   --drag-over-bg: #eaf2ff; /* Very light blue for drag over effect */
   --placeholder-color: #b0b0b0; /* Color for placeholder text in outputs */
   --loading-button-color: #35317a; /* Specific color for loading buttons */
   --disabled-bg: #cccccc; /* Background color for truly disabled buttons */
}

/* Base Styles */
body {
   margin: 0;
   font-family: "Inter", sans-serif;
   -webkit-font-smoothing: antialiased;
   -moz-osx-font-smoothing: grayscale;
   background-color: var(--primary-bg);
   color: var(--text-dark);
   line-height: 1.6;
}

.App {
   min-height: 100vh;
   display: flex;
   flex-direction: column;
   align-items: center;
   padding-bottom: 50px; /* Add some padding at the bottom */
   box-sizing: border-box; /* Include padding in element's total width and height */
}

.logo-icon {
   font-size: 1.5rem;
   color: var(--accent-blue);
}

/* Main Content Container */
.container {
   display: flex;
   flex-direction: column;
   gap: 30px; /* Space between sections */
   width: 100%;
   max-width: 80%; /* Max width for content */
   padding: 0 20px; /* Horizontal padding */
}

/* Card Styling for sections */
.card {
   background-color: var(--card-bg);
   padding: 30px;
   border-radius: 12px;
   box-shadow: 0 5px 15px var(--shadow-light);
   transition: transform 0.3s ease, box-shadow 0.3s ease;
   border: 1px solid var(--border-color);
}

.input-section {
   text-align: center;
   display: flex;
   flex-direction: column;
   gap: 30px; /* Space between sections */
   width: 100%;
   padding: 10px; /* Horizontal padding */
}

/* File Upload Custom Styling (Drag & Drop Area) */
.upload-box {
   display: flex;
   flex-direction: column;
   align-items: center;
   justify-content: center;
   padding: 40px 30px;
   background-color: var(--card-bg);
   border: 2px dashed var(--border-color);
   border-radius: 10px;
   cursor: pointer;
   font-size: 1.1rem;
   color: var(--text-light);
   transition: all 0.3s ease;
   margin-bottom: 30px;
   text-align: center;
}

.upload-box:hover {
   border-color: var(--accent-blue);
   color: var(--accent-blue); /* Apply hover color to text as well */
}

.upload-box.drag-over {
   background-color: var(--drag-over-bg);
   border-color: var(--accent-blue);
   box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.3); /* Subtle glow on drag over */
}

.upload-icon {
   font-size: 4rem;
   color: var(--accent-blue);
   margin-bottom: 15px;
}

.upload-box p {
   margin: 0;
   font-size: 1rem;
   color: var(--text-light);
}

.browse-text {
   color: var(--accent-blue);
   font-weight: 600;
   cursor: pointer;
   font-size: 1rem;
   display: inline-block; /* Makes it clickable like a link */
   margin-top: 10px;
   transition: color 0.3s ease;
}

.browse-text:hover {
   color: var(--accent-blue-hover);
   text-decoration: underline;
}

.selected-file {
   margin-top: 15px;
   font-style: italic;
   color: var(--text-dark); /* Darker color for selected filename */
   display: flex;
   align-items: center;
   justify-content: center;
   gap: 8px;
}

.clear-file-icon {
   color: var(--error-color);
   cursor: pointer;
   font-size: 0.9em;
   transition: transform 0.2s ease;
}

.clear-file-icon:hover {
   transform: scale(1.2);
}

input[type="file"] {
   display: none; /* Hide default file input */
}

/* Buttons Section */
.buttons {
   display: flex;
   justify-content: center;
   gap: 20px;
   margin-top: 25px;
   flex-wrap: wrap; /* Allow buttons to wrap on smaller screens */
}

.button {
   background-color: var(--accent-blue);
   color: var(--button-text-color);
   padding: 12px 25px;
   border: none;
   border-radius: 8px;
   cursor: pointer;
   font-size: 1rem;
   font-weight: 600;
   transition: all 0.3s ease;
   display: flex;
   align-items: center;
   justify-content: center;
   gap: 8px;
   min-width: 160px; /* Ensure minimum width for consistent sizing */
   text-decoration: none; /* In case it's rendered as an anchor tag */
   white-space: nowrap; /* Prevent text wrapping within button */
}

/* Specific style for buttons in a loading state */
.button.loading-button {
   background-color: var(
      --loading-button-color
   ); /* The requested #35317a color */
   cursor: wait; /* Indicate loading state */
   opacity: 1; /* Ensure full visibility, overriding potential disabled opacity */
   pointer-events: none; /* Prevent additional clicks during loading */
   box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); /* Keep a subtle shadow */
}

/* Hover effect for buttons that are not disabled and not in a loading state */
.button:hover:not(:disabled):not(.loading-button) {
   background-color: var(--accent-blue-hover);
   transform: translateY(-2px); /* Slight lift on hover */
   box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
}

/* Style for buttons that are disabled but NOT in a loading state (e.g., no file selected) */
.button:disabled:not(.loading-button) {
   background-color: var(
      --disabled-bg
   ); /* Use the defined disabled background color */
   cursor: not-allowed;
   opacity: 0.7;
   transform: none; /* Remove any transform if disabled */
   box-shadow: none; /* Remove shadow if disabled */
}

/* Success state for buttons after completion */
.success-button {
   background-color: var(--accent-green);
   box-shadow: 0 4px 10px rgba(40, 167, 69, 0.2);
}

.success-button:hover:not(:disabled):not(.loading-button) {
   background-color: #218838; /* Slightly darker green on hover */
}

/* Spinner Animation */
.spinner {
   animation: spin 1s linear infinite;
}

.inner-div {
   /* flex: 1; Removed as grid handles sizing */
   min-width: 300px; /* Adjusted min-width for each box to fit 3 in a row more easily */
   background-color: var(--card-bg);
   padding: 25px;
   border-radius: 12px;
   box-shadow: 0 5px 15px var(--shadow-light);
   border: 1px solid var(--border-color);
   display: flex;
   justify-content: space-around;
   gap: 10px;
}

.contextual-analysis {
   width: 50%;
}
.summary {
   width: 50%;
}
@keyframes spin {
   0% {
      transform: rotate(0deg);
   }
   100% {
      transform: rotate(360deg);
   }
}

/* Error Message Styling */
.error-message {
   color: var(--error-color);
   background-color: rgba(220, 53, 69, 0.1); /* Light red background */
   border: 1px solid var(--error-color);
   padding: 12px;
   border-radius: 8px;
   margin-top: 25px;
   text-align: center;
   font-size: 0.95rem;
   display: flex;
   align-items: center;
   justify-content: center;
   gap: 8px;
}

/* --- Output Results Section --- */

.output-container {
   display: inline;
}

.output-section-title {
   font-family: "Montserrat", sans-serif;
   font-size: 1.8rem;
   font-weight: 600;
   color: var(--text-dark);
   text-align: center;
   margin-bottom: 25px;
   margin-top: 20px;
}

.output-boxes {
   display: flex; /* Three equal columns, responsive */
   gap: 30px; /* Space between output boxes */
   justify-content: center; /* Center boxes within the grid container */
   flex-direction: column;
}

.box {
   /* flex: 1; Removed as grid handles sizing */
   min-width: 300px; /* Adjusted min-width for each box to fit 3 in a row more easily */
   background-color: var(--card-bg);
   padding: 25px;
   border-radius: 12px;
   box-shadow: 0 5px 15px var(--shadow-light);
   border: 1px solid var(--border-color);
   display: flex;
   flex-direction: column; /* Stack title and text vertically */
}

.box-title {
   color: var(--text-dark);
   margin-top: 0;
   margin-bottom: 15px;
   font-size: 1.4rem;
   font-weight: 600;
   display: flex;
   align-items: baseline;
   border-bottom: none;
   justify-content: center;
   gap: 10px;
}

.download-icons {
   cursor: pointer;
}

.download-icons span {
   cursor: pointer;
   color: var(--accent-blue);
   font-size: 1.2em;
   transition: transform 0.2s ease, color 0.2s ease;
}

.download-icons span:hover {
   color: var(--accent-blue-hover);
   transform: scale(1.1);
}

li {
   padding: 5px 0;
}

.output-text {
   white-space: pre-wrap; /* Preserve whitespace and line breaks */
   word-wrap: break-word; /* Break long words */
   flex-grow: 1; /* Allow text area to fill available space */
   overflow: hidden; /* Enable vertical scrolling if content overflows */
   padding: 15px; /* Increased padding within the text area */
   background-color: var(
      --primary-bg
   ); /* Lighter background for the text area */
   border-radius: 8px;
   border: 1px solid var(--border-color);
   font-size: 0.95rem;
   line-height: 1.5;
   color: var(--text-dark);
   min-height: 200px; /* Ensure a minimum height for output boxes */
}

.output-text.loading-placeholder {
   display: flex;
   align-items: center;
   justify-content: center;
   gap: 10px;
   color: var(--placeholder-color);
   font-style: italic;
   font-size: 1rem;
}

.output-text::-webkit-scrollbar {
   width: 8px;
}

.output-text::-webkit-scrollbar-track {
   background: var(--border-color);
   border-radius: 10px;
}

.output-text::-webkit-scrollbar-thumb {
   background: var(--accent-blue);
   border-radius: 10px;
   border: 2px solid var(--primary-bg); /* Border color matches track background */
}

.output-text::-webkit-scrollbar-thumb:hover {
   background: var(--accent-blue-hover);
}

.transcription {
   background-color: var(--card-bg);
   padding: 30px;
   border-radius: 12px;
   transition: transform 0.3s ease, box-shadow 0.3s ease;
   border: 1px solid var(--border-color);
   text-align: justify;
}

/* Responsive adjustments */
@media (max-width: 992px) {
   .output-boxes {
      /* On medium screens, allow two columns if they fit, otherwise stack */
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      /* Changed from flex-direction: column to ensure grid behavior persists but allows wrapping */
   }
}

@media (max-width: 768px) {
   .logo-icon {
      font-size: 1.2rem;
   }
   .container {
      padding: 0 15px;
      margin-top: 30px;
   }
   .card {
      padding: 20px;
   }
   .upload-box {
      padding: 30px 20px;
      font-size: 1rem;
   }
   .upload-icon {
      font-size: 3rem;
   }
   .buttons {
      flex-direction: column; /* Stack buttons vertically */
      gap: 15px;
   }
   .button {
      min-width: unset;
      font-size: 0.95rem;
      padding: 10px 20px;
   }
   .error-message {
      font-size: 0.9rem;
      padding: 10px;
   }
   .output-section-title {
      font-size: 1.5rem;
   }
   .box-title {
      font-size: 1.2rem;
   }
   .output-text {
      font-size: 0.9rem;
   }
   .output-boxes {
      /* On small screens, stack into a single column */
      grid-template-columns: 1fr;
   }
}

@media (max-width: 480px) {
   .App {
      padding: 10px;
   }
   .logo-icon {
      font-size: 1rem;
   }
   .container {
      gap: 20px;
      margin-top: 20px;
   }
   .card {
      padding: 15px;
   }
   .upload-box {
      padding: 20px 15px;
   }
   .upload-icon {
      font-size: 2.5rem;
   }
   .buttons {
      gap: 10px;
   }
}
